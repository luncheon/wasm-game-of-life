var x="./wasm_game_of_life_bg.wasm";var AA=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder,K=new AA("utf-8",{ignoreBOM:!0,fatal:!0});K.decode();var p=null;function eA(){return(p===null||p.buffer!==l.buffer)&&(p=new Uint8Array(l.buffer)),p}function tA(A,e){return K.decode(eA().subarray(A,A+e))}var c=class{static __wrap(e){let t=Object.create(c.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();G(e)}constructor(e,t){var r=$(e,t);return c.__wrap(r)}random(){F(this.ptr)}single_space_ship(e,t){M(this.ptr,e,t)}get as_ptr(){var e=C(this.ptr);return e}get cells_ptr(){var e=R(this.ptr);return e}get row_count(){var e=D(this.ptr);return e>>>0}get column_count(){var e=P(this.ptr);return e>>>0}tick(){H(this.ptr)}},u=class{static __wrap(e){let t=Object.create(u.prototype);return t.ptr=e,t}__destroy_into_raw(){let e=this.ptr;return this.ptr=0,e}free(){let e=this.__destroy_into_raw();S(e)}constructor(e,t,r,j,o){var _=L(e,t,r,j,o);return u.__wrap(_)}get width(){var e=T(this.ptr);return e>>>0}get height(){var e=N(this.ptr);return e>>>0}get data_ptr(){var e=W(this.ptr);return e}draw(){U(this.ptr)}};function B(){var A=Date.now();return A}function O(A,e){throw new Error(tA(A,e))}var jA={["./wasm_game_of_life_bg.js"]:{__wbg_now_c3277d0b8a8f625b:B,__wbindgen_throw:O}};async function nA(A,e){if(typeof A=="string"){let t=await fetch(A);if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn(r);else throw r}A=await t.arrayBuffer()}return await WebAssembly.instantiate(A,e)}var{instance:n,module:dA}=await nA(x,jA),l=n.exports.memory,G=n.exports.__wbg_universe_free,$=n.exports.universe_new,F=n.exports.universe_random,M=n.exports.universe_single_space_ship,C=n.exports.universe_as_ptr,R=n.exports.universe_cells_ptr,D=n.exports.universe_row_count,P=n.exports.universe_column_count,H=n.exports.universe_tick,S=n.exports.__wbg_universecanvasdrawer_free,L=n.exports.universecanvasdrawer_new,T=n.exports.universecanvasdrawer_width,N=n.exports.universecanvasdrawer_height,W=n.exports.universecanvasdrawer_data_ptr,U=n.exports.universecanvasdrawer_draw;var i=document.body.appendChild(document.createElement("aside"));i.style.position="fixed";i.style.top="16px";i.style.left="16px";i.style.padding="4px";i.style.background="rgba(255,255,255,.8)";i.style.userSelect="none";var a=3,Q=[204,204,204],f=[255,255,255],q=[0,0,0],s=new c(800,800);s.random();var J=([A,e,t])=>`rgb(${A},${e},${t})`,d=([A,e,t])=>(255<<24)+(t<<16)+(e<<8)+A,g=()=>{let A=document.querySelector("canvas");A&&(A.remove(),A.width=0,A.height=0)},aA=(()=>{let A=i.appendChild(document.createElement("div"));A.style.float="right",A.style.color="hsl(150,100%,50%)",A.style.textShadow="1px 1px 1px hsl(150,100%,20%)",A.style.fontVariantNumeric="tabular-nums",A.textContent="0 fps";let e=0,t=performance.now();return setInterval(()=>{let r=performance.now();A.textContent=`${Math.round(e*1e3/(r-t))} fps`,e=0,t=r},512),()=>e++})(),E=A=>{let e,t=()=>{A(),aA(),e=requestAnimationFrame(t)};return t(),{cancel:()=>e!==void 0&&cancelAnimationFrame(e)}},X=A=>{let e=new Uint8Array(l.buffer,s.cells_ptr,s.row_count*s.column_count),t=0;for(let r=0;r<s.row_count;r++)for(let j=0;j<s.column_count;j++)A(r,j,e[t]),t++},Y=A=>{let e=A.getImageData(0,0,A.canvas.width,A.canvas.height),t=new Uint32Array(e.data.buffer),r=d(Q);for(let j=0;j<A.canvas.width;j+=a+1)for(let o=0;o<A.canvas.height;o++)t[o*A.canvas.width+j]=r;for(let j=0;j<A.canvas.height;j+=a+1)for(let o=0;o<A.canvas.width;o++)t[j*A.canvas.width+o]=r;A.putImageData(e,0,0)},sA=()=>{let A=document.body.appendChild(document.createElement("canvas"));A.width=(a+1)*s.column_count+1,A.height=(a+1)*s.row_count+1;let e=A.getContext("2d");Y(e);let t=J(f),r=J(q),j=()=>{X((o,_,v)=>{e.fillStyle=v?r:t,e.fillRect(_*(a+1)+1,o*(a+1)+1,a,a)})};return E(()=>{j(),s.tick()})},oA=()=>{let A=document.body.appendChild(document.createElement("canvas"));A.width=(a+1)*s.column_count+1,A.height=(a+1)*s.row_count+1;let e=A.getContext("2d");Y(e);let t=e.getImageData(0,0,A.width,A.height),r=new Uint32Array(t.data.buffer),j=(w,m,k,b,Z)=>{let I=w+m*A.width;for(let y=0;y<b;y++){for(let h=0;h<k;h++)r[I+h]=Z;I+=A.width}},o=d(f),_=d(q),v=()=>{X((w,m,k)=>{let b=k?_:o;j(m*(a+1)+1,w*(a+1)+1,a,a,b)}),e.putImageData(t,0,0)};return E(()=>{v(),s.tick()})},V=()=>{let A=new u(s.as_ptr,a,d(Q),d(f),d(q)),e=new ImageData(new Uint8ClampedArray(l.buffer,A.data_ptr,A.width*A.height*4),A.width,A.height),t=document.body.appendChild(document.createElement("canvas"));t.width=A.width,t.height=A.height;let r=t.getContext("2d");return E(()=>{A.draw(),r.putImageData(e,0,0),s.tick()})};{let{cancel:A}=V(),e=i.appendChild(document.createElement("div"));e.innerHTML=`
    <label style="cursor:pointer"><input type="radio" name="renderer">Stop</label><br>
    <label style="cursor:pointer"><input type="radio" name="renderer" value="canvas-api">fillRect (JS)</label><br>
    <label style="cursor:pointer"><input type="radio" name="renderer" value="image-data">putImageData (JS)</label><br>
    <label style="cursor:pointer"><input type="radio" name="renderer" value="wasm" checked>putImageData (WASM)</label><br>
  `,e.addEventListener("change",t=>{if(!(!(t.target instanceof HTMLInputElement)||t.target.name!=="renderer"))switch(A(),t.target.value){case"canvas-api":g(),{cancel:A}=sA();break;case"image-data":g(),{cancel:A}=oA();break;case"wasm":g(),{cancel:A}=V();break;default:A=()=>{};break}})}
